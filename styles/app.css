/* =========================
   Cursed Energy â€“ UI Styles
   ========================= */

/* --- Header badge (compact) --- */
.ce-badge {
  margin-left: .5rem;
  padding: .1rem .4rem;
  border-radius: 6px;
  background: rgba(0,0,0,.25);
  border: 1px solid rgba(255,255,255,.12);
  display: inline-flex;
  gap: .4rem;
  align-items: center;
  font-size: 12px;
  line-height: 1;
  user-select: none;
}
.ce-badge .ce-btn {
  cursor: pointer;
  padding: 0 .25rem;
  border-radius: 4px;
  border: 1px solid transparent;
}
.ce-badge .ce-btn:hover { border-color: rgba(255,255,255,.25); }
.ce-badge .ce-cat {
  margin-left: .25rem;
  font-weight: 700;
  cursor: pointer;
  opacity: .9;
}
.ce-badge .ce-cat:hover { opacity: 1; text-decoration: underline; }

/* --- Big CE row under attributes/resources --- */
.ce-row {
  margin: .5rem 0;
  background: rgba(0,0,0,.15);
  padding: .5rem .6rem;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,.08);
}
.ce-row-title {
  font-weight: 700;
  margin-bottom: .35rem;
  letter-spacing: .3px;
}
.ce-bar {
  position: relative;
  height: 10px;
  background: #2f2f2f;
  border-radius: 6px;
  overflow: hidden;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
}
.ce-fill {
  position: absolute; left: 0; top: 0; bottom: 0;
  width: 0%;
  background: #6a5acd; /* slateblue; keep neutral if theming later */
  transition: width .2s ease;
}
.ce-count {
  display: flex;
  align-items: center;
  gap: .5rem;
  margin-top: .35rem;
  font-size: 12px;
}
.ce-mini-btn {
  cursor: pointer;
  padding: 0 .4rem;
  line-height: 1.3;
  user-select: none;
  border: 1px solid rgba(255,255,255,.15);
  border-radius: 4px;
  background: rgba(255,255,255,.03);
}
.ce-mini-btn:hover {
  background: rgba(255,255,255,.07);
}

/* --- Optional dim for spells when CE is insufficient --- */
.ce-insufficient {
  opacity: 0.6;
  filter: grayscale(0.3);
}

/* --- Hide most spell slot UI when the sheet root has .ce-hide-slots --- */
.ce-hide-slots .spellcasting,
.ce-hide-slots .spellbook .slots,
.ce-hide-slots .spellbook .slot-max,
.ce-hide-slots .spellbook .slot-total,
.ce-hide-slots .spellbook .slot-remaining,
.ce-hide-slots .spell-prepared,
.ce-hide-slots .spell-slots,
.ce-hide-slots [data-action="prepare"],
.ce-hide-slots .prepared,
.ce-hide-slots .spell-uses,
.ce-hide-slots .item-detail[data-action="prepare"],
.ce-hide-slots .item-detail[data-action="rest"],
.ce-hide-slots .spellcasting-ability .slots-available,
.ce-hide-slots .spellcasting-ability .slot-levels {
  display: none !important;
}

/* =========================
   CE Playground (simulator)
   ========================= */

.ce-play .window-content {
  padding: .6rem .75rem;
}

.ce-play .ce-row {
  display: flex;
  gap: .5rem;
  align-items: center;
  margin: .25rem 0;
}

.ce-play label {
  font-weight: 600;
  font-size: 12px;
  opacity: .9;
}

.ce-play .num {
  width: 90px;
}

.ce-play .grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: .6rem;
  margin: .4rem 0;
}

.ce-play .box {
  padding: .5rem .6rem;
  border-radius: 8px;
  background: rgba(0,0,0,.12);
  border: 1px solid rgba(255,255,255,.08);
}

.ce-play h3 {
  font-size: 13px;
  margin: 0 0 .35rem 0;
  letter-spacing: .2px;
}

.ce-play table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
  margin-top: .25rem;
}
.ce-play th, .ce-play td {
  border: 1px solid var(--color-border-light-2, #555);
  padding: .25rem .4rem;
  text-align: center;
  font-size: 12px;
}
.ce-play thead th {
  background: rgba(255,255,255,.04);
}

.ce-play .apply {
  border-radius: 8px;
  padding: .4rem .6rem;
  border: 1px solid rgba(255,255,255,.15);
  background: rgba(255,255,255,.05);
  cursor: pointer;
  font-weight: 600;
}
.ce-play .apply:hover {
  background: rgba(255,255,255,.09);
}

/* =========================
   Theming / accessibility
   ========================= */

/* High contrast preference: beef up borders/fills */
@media (prefers-contrast: more) {
  .ce-badge { border-color: rgba(255,255,255,.35); }
  .ce-fill { box-shadow: inset 0 0 0 1px rgba(0,0,0,.35); }
  .ce-row { border-color: rgba(255,255,255,.2); }
  .ce-play .box { border-color: rgba(255,255,255,.2); }
}

/* Light themes: neutralize backgrounds slightly */
:root.light .ce-row,
.theme-light .ce-row {
  background: rgba(0,0,0,.06);
  border-color: rgba(0,0,0,.08);
}
:root.light .ce-badge,
.theme-light .ce-badge {
  background: rgba(0,0,0,.06);
  border-color: rgba(0,0,0,.08);
}
:root.light .ce-play .box,
.theme-light .ce-play .box {
  background: rgba(0,0,0,.05);
  border-color: rgba(0,0,0,.08);
}

/* Compact header spacing on very narrow sheets */
@media (max-width: 520px) {
  .ce-badge { font-size: 11px; gap: .3rem; }
  .ce-row { padding: .45rem .5rem; }
}
